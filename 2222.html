<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<div class="wrapper">
  <div class="container">
    <h2>Header text</h2>
    <p class="text">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Perspiciatis similique, ad repudiandae? Maiores repellendus, fugiat deserunt necessitatibus qui voluptate cumque voluptatibus obcaecati consequuntur eos illum esse dolores facilis quisquam, velit sapiente sed ab hic odit accusamus omnis expedita fuga? Itaque unde perferendis explicabo autem suscipit ullam, maiores. Delectus quidem rerum eum nisi quisquam pariatur quibusdam error dignissimos cumque natus et, doloribus magni nobis harum tempora maiores quod aliquam voluptate, beatae placeat sed, perferendis repudiandae optio. Quas ratione aperiam porro ut officia iure quo, sunt culpa repellendus nesciunt! At, accusantium sit maiores quam ea obcaecati praesentium tempora pariatur eligendi reiciendis nemo, similique nisi officia ducimus nihil magni voluptatem aliquid eveniet. Labore, repellendus, neque. Possimus magnam dolor quas mollitia expedita quasi incidunt doloribus, labore ducimus eaque ab. Sequi iste aliquid, earum rem explicabo fuga veritatis, veniam labore neque vel pariatur modi ratione sit voluptate dolor quas cumque sunt, et nam tenetur aut. Ipsam voluptate, aliquam ipsum sed blanditiis fuga, eveniet dicta minus expedita est eum ut? Laboriosam voluptatem error mollitia, laudantium sint, enim dicta, dolore, eligendi esse officiis labore quis! Modi, quidem. Sequi quis placeat dolor qui distinctio sed quibusdam quia assumenda laborum rem corporis praesentium temporibus iste dolorum molestias, ex quae voluptate laudantium! Blanditiis modi deleniti libero deserunt, sed. Libero quod, veniam aliquam magni mollitia dolores amet assumenda similique ducimus sapiente nulla ea repellendus ipsa, molestias reiciendis blanditiis quis odit labore rem possimus. Excepturi et delectus enim, facilis minus accusamus illum temporibus. Placeat temporibus ratione eos blanditiis atque illum delectus veritatis dignissimos animi, voluptates qui, dolorum, vero repellat neque nesciunt sint facere consectetur possimus explicabo quam? Reprehenderit perspiciatis fugit vero suscipit veniam laborum at, asperiores, corporis laudantium minima, labore delectus consequuntur aspernatur quaerat. Commodi perspiciatis rerum, tenetur! Quas maxime debitis, consequatur tenetur. Et non esse, maiores amet, facilis maxime delectus provident, sit reiciendis, voluptatum magnam nostrum nihil minus perferendis tenetur. Corporis odit eos, ipsum error et consectetur doloribus, animi ad nobis voluptates fugit explicabo illum maxime unde earum, incidunt sint. Consequatur officia laborum molestiae dolorum placeat ipsum, nisi quis blanditiis, aliquam hic facilis labore, harum impedit recusandae vitae, porro dignissimos voluptatum? Sed, obcaecati at. Doloremque, voluptatum pariatur laboriosam, recusandae, magni repudiandae fugiat vitae, itaque necessitatibus libero accusantium unde veniam illum corporis alias! Perferendis amet voluptatibus modi impedit reiciendis quod unde quia animi deserunt ut ipsam voluptate fuga temporibus repudiandae in ducimus aspernatur porro rem dolores corrupti, atque, reprehenderit culpa mollitia. Perferendis praesentium asperiores ducimus ratione nesciunt laudantium optio illum laboriosam quibusdam ipsa culpa quia iusto ex sunt voluptatem accusantium atque dicta at ipsam, ad, molestias corporis? Doloribus id laboriosam, quibusdam minima neque culpa! Accusamus ratione dolor cum eveniet ad placeat esse, assumenda animi maxime, laudantium nam nemo facere culpa amet id doloremque ut praesentium. Suscipit ut magnam, nihil quasi consequuntur recusandae cupiditate cumque atque, pariatur est eum dignissimos dolorem voluptates corporis quibusdam labore voluptatem tempora fuga voluptas nemo cum omnis tempore. Doloremque voluptas cum cupiditate mollitia explicabo aperiam, ipsam impedit ipsa architecto delectus aliquid quas, nam atque fuga optio enim illo debitis quibusdam suscipit eum velit consequuntur esse blanditiis numquam. Qui, ad quos, totam, excepturi animi quod quas fuga hic reprehenderit porro magnam. Sed cumque ea id soluta ipsa doloribus recusandae et, earum pariatur nesciunt incidunt qui, ex! Repellendus qui eligendi animi. Numquam reprehenderit accusantium culpa totam velit aliquam autem, ex voluptates et excepturi minus iste harum quisquam assumenda recusandae, eaque quaerat molestias fugiat delectus pariatur eum. Repellat voluptate iure nisi recusandae in cum cupiditate aut esse placeat numquam, excepturi odit modi, explicabo saepe eaque sit architecto molestiae eligendi at ad ratione officia. Aliquam quod fuga impedit omnis pariatur, consequatur aspernatur aperiam soluta tempore tenetur voluptates accusamus exercitationem. Tenetur quas dolor magni, itaque porro voluptatem voluptate harum! Minus quas commodi illo nihil mollitia veritatis, amet fugiat sapiente veniam a consectetur excepturi corporis officia vero atque. Modi, fuga, nihil! Obcaecati cumque sint eum voluptas deserunt dicta tenetur sit perspiciatis facere nobis, quo ratione asperiores in velit autem laboriosam natus, pariatur! Ipsum ex maxime modi eaque odit quidem totam soluta dolore deleniti, officiis suscipit, dicta obcaecati, reprehenderit accusamus! Ipsum molestiae dolor suscipit odio autem quos, laboriosam qui id maiores, aut dolorem nesciunt temporibus repudiandae nostrum inventore vero numquam ab at voluptate! Voluptatem, laudantium.</p>
  </div>
  <div class="progress">
    <svg x="0px" y="0px" width="40px" height="40px" vievbox="0 0 40 40">
      <circle fill="none" stroke="#18CDD0" stroke-width="2" cx="20" cy="20" r="18px" ></circle>
    </svg>
  </div>
</div>
	<style type="text/css">
.wrapper {
  width: 100%;
}

  .container {
    
    width: 20%;
    margin: 130vh auto;
  }

    h2 {
      font-size: 40px;
      text-align: center;
    }

    p {
      text-indent: 40px;
      text-align: justify;
    }

.progress {
  opacity: 0;
  height: 40px;
  width: 40px;
  border-radius: 50px;
  border: 1px solid transparent;
  -webkit-transition: opacity .3s ease;
  -moz-transition: opacity .3s ease;
  -ms-transition: opacity .3s ease;
  -o-transition: opacity .3s ease;
  transition:opacity .3s ease;
  position: fixed;
  right: 50px;
  top: 50vh;
  transform: translateZ(0);
}


circle {
  -webkit-transform-origin: 50%;
    transform-origin: 50%;
    -webkit-transform: rotate3d(1, 0, 0, 180deg);
    transform: rotate3d(1, -1, 0, 180deg);
  stroke-dasharray: 113;
  stroke-dashoffset: 120; /* [113 - 226] */
  -webkit-transition: stroke-dashoffset .3s ease;
  -moz-transition: stroke-dashoffset .3s ease;
  -ms-transition: stroke-dashoffset .3s ease;
  -o-transition: astroke-dashoffsetl .3s ease;
  transition:stroke-dashoffset .3s ease ;
}

.active {
  display: block;
  opacity: 1;
  border: 1px solid #cfcfcf;
}
	</style>





	<script type="text/javascript">
	alert(3123123123123);
  'use strict';
alert(1111);
let body = document.body;
let docEl = document.documentElement;
let paragraph = document.getElementsByClassName('text')[0],
    progress = document.getElementsByClassName('progress')[0],
    circle = document.getElementsByTagName('circle')[0];
let screenH = docEl.clientHeight;
let elemTopPos = getCoords(paragraph).top,
    elemHeight = paragraph.offsetHeight;

body.scrollTop = localStorage.scroll;

function getCircleLenght(circle) {
    let rad = circle.r.baseVal.value;
    let circleLenght = 2 * Math.PI * rad;
    return circleLenght;
}

var computedCircleLength = getCircleLenght(circle);

function getCoords(elem) { 
    let box = elem.getBoundingClientRect();

    let scrollTop = window.pageYOffset ||  docEl.scrollTop || body.scrollTop;
    let scrollLeft = window.pageXOffset || docEl.scrollLeft || body.scrollLeft;
    
    let clientTop = docEl.clientTop || body.clientTop || 0;
    let clientLeft = docEl.clientLeft || body.clientLeft || 0;
    
    let top = box.top + scrollTop - clientTop;
    let left = box.left + scrollLeft - clientLeft;
    
    return {
      top: top,
      left: left
    };  
  }
  
function updateTextPosition() {

  let pageScrl = window.pageYOffset;
  localStorage.scroll = pageScrl;

  if (pageScrl < elemTopPos) {
      circle.style.strokeDashoffset = computedCircleLength + 'px';
      progress.classList.remove('active');
  } else if (pageScrl > elemTopPos && pageScrl < elemTopPos + elemHeight - screenH ) {
      
      let differ = pageScrl - elemTopPos;
      let procentViev = differ / (elemHeight - screenH) ;
      circle.style.strokeDashoffset = parseInt(computedCircleLength * procentViev + computedCircleLength) + 'px';
      progress.classList.add('active');
  } else if(pageScrl < elemTopPos + elemHeight - (screenH / 2)) {
      circle.style.strokeDashoffset = (computedCircleLength * 2) + 'px';
      progress.classList.add('active');
  } else if(pageScrl > elemTopPos + elemHeight - (screenH / 2)) {
      progress.classList.remove('active'); 
  }

  console.log(localStorage.scroll);
  
}

window.addEventListener('scroll', updateTextPosition, false);









	</script>
</body>
</html>